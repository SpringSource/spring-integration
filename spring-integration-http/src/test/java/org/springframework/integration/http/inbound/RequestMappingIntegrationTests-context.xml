<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/integration/http"
			 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
			 xmlns:beans="http://www.springframework.org/schema/beans"
			 xmlns:util="http://www.springframework.org/schema/util"
			 xmlns:si="http://www.springframework.org/schema/integration"
			 xsi:schemaLocation="http://www.springframework.org/schema/beans
			http://www.springframework.org/schema/beans/spring-beans.xsd
			http://www.springframework.org/schema/util
			http://www.springframework.org/schema/util/spring-util.xsd
			http://www.springframework.org/schema/integration
			http://www.springframework.org/schema/integration/spring-integration.xsd
			http://www.springframework.org/schema/integration/http
			http://www.springframework.org/schema/integration/http/spring-integration-http.xsd">

	<util:constant id="TEST_PATH"
				   static-field="org.springframework.integration.http.inbound.RequestMappingIntegrationTests.TEST_PATH"/>

	<si:channel id="toLowerCaseChannel"/>

	<si:channel id="toUpperCaseChannel"/>

	<inbound-gateway path="#{TEST_PATH}"
					 request-channel="toLowerCaseChannel"
					 payload-expression="#pathVariables.value">
		<request-mapping headers="toLowerCase"/>
	</inbound-gateway>

	<si:transformer input-channel="toLowerCaseChannel" expression="payload.toLowerCase()"/>

	<inbound-gateway path="#{TEST_PATH}"
					 request-channel="toUpperCaseChannel"
					 payload-expression="#pathVariables.value">
		<request-mapping headers="toUpperCase"/>
	</inbound-gateway>

	<si:transformer input-channel="toUpperCaseChannel" expression="payload.toUpperCase()"/>

</beans:beans>
