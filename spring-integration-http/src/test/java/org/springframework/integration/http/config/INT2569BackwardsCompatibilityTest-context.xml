<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:int="http://www.springframework.org/schema/integration"
	xmlns:int-http="http://www.springframework.org/schema/integration/http"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd
		http://www.springframework.org/schema/integration/http http://www.springframework.org/schema/integration/http/spring-integration-http-2.2.xsd">
	
	<int:router input-channel="inputChannel" expression="payload + 'Channel'"/>
	
	<int:channel id="vmwChannel"/>
	<int:channel id="ibmChannel"/>
	<int:channel id="orclChannel"/>
	<int:channel id="ctxsChannel"/>
	<int:channel id="fbChannel"/>
	<int:channel id="tChannel"/>
	<int:channel id="aaplChannel"/>
	
	<int-http:outbound-gateway url="{url}" request-channel="vmwChannel" reply-channel="replyChannel"
								expected-response-type="java.lang.String" http-method="GET">
		<int-http:uri-variable name="url" expression="'http://localhost:51234/testApps/int2569?q=vmw'" encode="false"/>
	</int-http:outbound-gateway>
	
	<int-http:outbound-gateway url="{Url}" request-channel="aaplChannel" reply-channel="replyChannel"
								expected-response-type="java.lang.String" http-method="GET">
		<int-http:uri-variable name="url" expression="'http://localhost:51234/testApps/int2569?q=aapl'" encode="false"/>
	</int-http:outbound-gateway>
	
	<int-http:outbound-gateway url="http://localhost:51234/{url}" request-channel="ibmChannel" reply-channel="replyChannel"
								expected-response-type="java.lang.String" http-method="GET">
		<int-http:uri-variable name="url" expression="'testApps/int2569?q=' + payload" encode="false"/>
	</int-http:outbound-gateway>
	
	<int-http:outbound-gateway url="http://localhost:51234/{url}{ticker}" request-channel="orclChannel" reply-channel="replyChannel"
								expected-response-type="java.lang.String" http-method="GET">
		<int-http:uri-variable name="url" expression="'testApps/int2569?q='" encode="false"/>
		<int-http:uri-variable name="ticker" expression="payload" encode="false"/>
	</int-http:outbound-gateway>
	
	<int-http:outbound-gateway url="http://localhost:51234/testApps/int2569?q={ticker}" request-channel="ctxsChannel" reply-channel="replyChannel"
								expected-response-type="java.lang.String" http-method="GET">
		<int-http:uri-variable name="ticker" expression="payload" />
	</int-http:outbound-gateway>
	
	<int-http:outbound-gateway url="http://localhost:51234/testApps/int2569?q={ticker}" request-channel="fbChannel" reply-channel="replyChannel"
								expected-response-type="java.lang.String" http-method="GET">
		<int-http:uri-variable name="TICKER" expression="payload" />
	</int-http:outbound-gateway>
	
	<int-http:outbound-gateway url="http://localhost:51234/testApps/int2569?q={TICKER}" request-channel="tChannel" reply-channel="replyChannel"
								expected-response-type="java.lang.String" http-method="GET">
		<int-http:uri-variable name="ticker" expression="payload" />
	</int-http:outbound-gateway>
	
	<int:channel id="replyChannel">
		<int:queue/>
	</int:channel>

</beans>
