<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="https://www.springframework.org/schema/beans"
       xmlns:xsi="https://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="https://www.springframework.org/schema/p"
       xmlns:util="https://www.springframework.org/schema/util"
       xmlns:int="https://www.springframework.org/schema/integration"
       xmlns:gfe="https://www.springframework.org/schema/gemfire"
       xmlns:context="https://www.springframework.org/schema/context"
       xsi:schemaLocation="https://www.springframework.org/schema/integration https://www.springframework.org/schema/integration/spring-integration.xsd
	    https://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd
		https://www.springframework.org/schema/util https://www.springframework.org/schema/util/spring-util.xsd
		https://www.springframework.org/schema/gemfire https://www.springframework.org/schema/gemfire/spring-gemfire.xsd
		https://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd">

    <context:property-placeholder location="org/springframework/integration/gemfire/inbound/cq/common.properties"/>
    
    <context:component-scan base-package="org.springframework.integration.gemfire.store"/>

    <int:channel id="i"/>

    <int:aggregator  release-strategy="releaseStrategy" correlation-strategy="correlationStrategy" message-store="gemfireMessageGroupStore" input-channel="i" output-channel="o"  />

    <int:channel id="o"/>

    <int:service-activator input-channel="o" ref="messageGroupStoreActivator" />

    <util:properties id="props" location="org/springframework/integration/gemfire/inbound/cq/gfe-cache.properties"/>

	<gfe:cache properties-ref="props" id="c"/>
    <gfe:transaction-manager cache-ref="c"/>

    <gfe:replicated-region id="unmarkedRegion"      cache-ref="c"/>
    <gfe:replicated-region id="markedRegion"        cache-ref="c"/>
    <gfe:replicated-region id="messageGroupRegion"  cache-ref="c"/>

</beans>