<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="https://www.springframework.org/schema/integration/file"
             xmlns:xsi="https://www.w3.org/2001/XMLSchema-instance"
             xmlns:beans="https://www.springframework.org/schema/beans"
             xmlns:integration="https://www.springframework.org/schema/integration"
             xsi:schemaLocation="https://www.springframework.org/schema/beans
			https://www.springframework.org/schema/beans/spring-beans.xsd
			https://www.springframework.org/schema/integration
			https://www.springframework.org/schema/integration/spring-integration.xsd
			https://www.springframework.org/schema/integration/file
			https://www.springframework.org/schema/integration/file/spring-integration-file.xsd">

    <inbound-channel-adapter id="fileSource"
                             directory="#{directory.root}"
                             auto-startup="true"
                             scanner="recursiveScanner"
                             channel="files">
        <integration:poller fixed-rate="1000"/>
    </inbound-channel-adapter>

    <integration:channel id="files">
        <integration:queue capacity="10"/>
    </integration:channel>

    <beans:bean id="recursiveScanner" class="org.springframework.integration.file.RecursiveLeafOnlyDirectoryScanner"/>

    <beans:bean id="directory" class="org.junit.rules.TemporaryFolder" init-method="create" destroy-method="delete"/>
</beans:beans>
